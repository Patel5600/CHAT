package com.seal.chat.ui.screens\n\nimport androidx.compose.foundation.layout.*\nimport androidx.compose.foundation.text.KeyboardOptions\nimport androidx.compose.material3.*\nimport androidx.compose.runtime.*\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.text.input.KeyboardType\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\n\n@Composable\nfun OtpScreen(\n    email: String,\n    onVerify: (otp: String) -> Unit,\n    onBack: () -> Unit,\n    isLoading: Boolean = false,\n    error: String? = null,\n    resendCountdown: Int = 0\n) {\n    var otp by remember { mutableStateOf(\"\") }\n\n    Column(\n        modifier = Modifier\n            .fillMaxSize()\n            .padding(24.dp),\n        verticalArrangement = Arrangement.Center,\n        horizontalAlignment = Alignment.CenterHorizontally\n    ) {\n        // Header\n        Text(\n            text = \"Verify Your Email\",\n            style = MaterialTheme.typography.headlineLarge,\n            modifier = Modifier.padding(bottom = 8.dp)\n        )\n\n        Text(\n            text = \"We sent a code to $email\",\n            style = MaterialTheme.typography.bodyMedium,\n            color = MaterialTheme.colorScheme.onSurfaceVariant,\n            modifier = Modifier.padding(bottom = 32.dp)\n        )\n\n        // OTP Input\n        OutlinedTextField(\n            value = otp,\n            onValueChange = { newValue ->\n                if (newValue.length <= 6 && newValue.all { it.isDigit() }) {\n                    otp = newValue\n                }\n            },\n            label = { Text(\"6-Digit Code\") },\n            modifier = Modifier\n                .fillMaxWidth()\n                .padding(bottom = 16.dp),\n            keyboardOptions = KeyboardOptions(\n                keyboardType = KeyboardType.Number\n            ),\n            enabled = !isLoading,\n            singleLine = true,\n            textStyle = MaterialTheme.typography.displaySmall.copy(\n                fontSize = 24.sp,\n                textAlign = TextAlign.Center,\n                letterSpacing = 8.sp\n            )\n        )\n\n        // Error Message\n        if (error != null) {\n            Surface(\n                modifier = Modifier\n                    .fillMaxWidth()\n                    .padding(bottom = 16.dp),\n                color = MaterialTheme.colorScheme.errorContainer,\n                shape = RoundedCornerShape(8.dp)\n            ) {\n                Text(\n                    text = error,\n                    color = MaterialTheme.colorScheme.error,\n                    style = MaterialTheme.typography.bodySmall,\n                    modifier = Modifier.padding(12.dp)\n                )\n            }\n        }\n\n        // Verify Button\n        Button(\n            onClick = { onVerify(otp) },\n            modifier = Modifier\n                .fillMaxWidth()\n                .height(48.dp),\n            enabled = otp.length == 6 && !isLoading\n        ) {\n            if (isLoading) {\n                CircularProgressIndicator(\n                    modifier = Modifier.size(24.dp),\n                    color = MaterialTheme.colorScheme.onPrimary,\n                    strokeWidth = 2.dp\n                )\n            } else {\n                Text(\"Verify\")\n            }\n        }\n\n        // Resend Button\n        Row(\n            modifier = Modifier\n                .fillMaxWidth()\n                .padding(top = 24.dp),\n            horizontalArrangement = Arrangement.Center,\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Text(\n                text = \"Didn't receive code? \",\n                style = MaterialTheme.typography.bodySmall,\n                color = MaterialTheme.colorScheme.onSurfaceVariant\n            )\n\n            if (resendCountdown > 0) {\n                Text(\n                    text = \"Resend in ${resendCountdown}s\",\n                    style = MaterialTheme.typography.bodySmall,\n                    color = MaterialTheme.colorScheme.onSurfaceVariant\n                )\n            } else {\n                TextButton(\n                    onClick = { /* Implement resend */ },\n                    enabled = !isLoading\n                ) {\n                    Text(\"Resend\")\n                }\n            }\n        }\n\n        // Back Button\n        TextButton(\n            onClick = onBack,\n            modifier = Modifier.padding(top = 16.dp)\n        ) {\n            Text(\"Back\")\n        }\n    }\n}\n"
