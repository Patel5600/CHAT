package com.seal.chat\n\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.*\nimport androidx.compose.ui.Modifier\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport com.seal.chat.ui.screens.LoginScreen\nimport com.seal.chat.ui.screens.OtpScreen\nimport com.seal.chat.ui.theme.SealChatTheme\nimport com.seal.chat.viewmodel.AuthViewModel\nimport timber.log.Timber\n\nclass MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        \n        // Initialize Timber for logging\n        if (BuildConfig.DEBUG) {\n            Timber.plant(Timber.DebugTree())\n        }\n        \n        setContent {\n            SealChatTheme {\n                Surface(\n                    modifier = Modifier.fillMaxSize(),\n                    color = MaterialTheme.colorScheme.background\n                ) {\n                    SealChatApp()\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun SealChatApp() {\n    val authViewModel: AuthViewModel = viewModel()\n    val authState by authViewModel.authState.collectAsState()\n\n    when {\n        authState.isAuthenticated -> {\n            // Main app screen\n            Surface(\n                modifier = Modifier.fillMaxSize(),\n                color = MaterialTheme.colorScheme.background\n            ) {\n                androidx.compose.material3.Text(\n                    \"Welcome! User: ${authState.userId}\",\n                    modifier = Modifier.fillMaxSize()\n                )\n            }\n        }\n        authState.isOtpSent -> {\n            OtpScreen(\n                email = authState.email ?: \"\",\n                onVerify = { otp ->\n                    authViewModel.verifyOtp(authState.email ?: \"\", otp)\n                },\n                onBack = {\n                    authViewModel.logout()\n                },\n                isLoading = authState.isLoading,\n                error = authState.error\n            )\n        }\n        else -> {\n            LoginScreen(\n                onOtpSent = { email ->\n                    authViewModel.sendOtp(email)\n                },\n                isLoading = authState.isLoading,\n                error = authState.error\n            )\n        }\n    }\n}\n"
